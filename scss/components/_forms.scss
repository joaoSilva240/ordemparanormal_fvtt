@use "../utils/typography";
@use "../utils/colors";
@use "../utils/variables";

.application.theme-light {
	background: url('../media/parchment.jpg') repeat;
	--color-header-background: #333;
	--color-border: #302831;
	--color-tabs-border: #555;
	--color-fieldset-border: #efe6d8;
	--color-form-label: #222;
	--color-form-label-hover: #111;
	--color-form-hint: #444;
	--color-form-hint-hover: #222;
	--color-select-option-bg: #f7f3e8;
	color: #222;
	input, select {
		color: #222 !important;
	}
}

section.itemsheet, form.ordemparanormal.actor {
	overflow: hidden;
	color: #222;

	.scrollable {
		box-sizing: border-box;
		width: 100%;
		padding: 0;
	}

	.prosemirror menu, prosemirror menu {
		background: #eeede0;
	}

	section.window-content {
		position: relative;
		display: flex;
		background: #eeede0;
		height: 100%;

		input {
			text-align: center;
		}

		.tab {
			padding-top: 10px;
			height: 100%;
			overflow: auto;

			&.active {
				display: flex;
				flex-direction: column;
			}

			&[data-tab="inventory"] {
				overflow: hidden;
				padding-bottom: 20px;
				.inventory-body {
					margin-bottom: 5px;
					overflow: auto;
					height: 100%;
				}
			}
		}
		
		header.sheet-header-op {
			display: flex;
			flex-direction: column;
			margin-bottom: 10px;

			.progress {
				padding-left: 10px;

				input {
					width: 40px;
				}
			}
			
			.profile-img {
				flex: 0 0 48px;
				height: 48px;
				margin-right: 10px;
			}

			h1.charname {
				height: 45px;
				padding: 0px;
				margin: 5px 0;
				border-bottom: 0;
				input {
					min-width: 235px;
					width: 100%;
					height: 100%;
					margin: 0;
				}
			}

			.header-identify {
				display: flex;
				justify-content: center;
				align-items: center;

				h1, h2, h3, h4 {
					border: 0;
				}

				h1.charname {
					display: flex;
					justify-content: center;
					align-items: center;
					width: 100%;
					margin: 0;

					input {
						font-size: 0.6em;
						font-family: 'Signika';
					}
				}

			}
		}

	section.inventory-prestige {
		position: relative;
		justify-content: center;
		align-items: center;
		width: 100%;
		background-color: #eeede0;

		.patents {
			display: flex;
			padding: 0px 6px;
			gap: 8px;
			margin-bottom: 8px;

			.limit {
				display: flex;
				border: 1px solid #888;
				border-radius: 4px;
				width: 44px;
				height: 32px;
				text-align: center;
			}

			.prestige {
				display: flex;
				flex: 1;
				flex-grow: 1;
				text-align: center;
				font-size: 12px;
			}

			.name, .credit {
				display: flex;
				flex-grow: 1;
				padding: 4px 6px;
				border: 1px solid #888;
				border-radius: 4px;
				justify-content: center;
				align-items: center;
				background-color: rgba(0,0,0,0.05);
				font-weight: bold;
			}
		}
	}

	section.space {
		position: relative;
		width: 100%;

		.space-body {
			position: absolute;
			border: 1px solid #272727;
			border-radius: 3px;
			width: 100%;
			height: 13px;

			.spacelabel {
				position: absolute;
				z-index: 12;
				color: #fff;
				font-size: 9px;
				padding: 1px 4px;
				mix-blend-mode: difference;
			}

			.bar {
				display: block !important;
				margin-top: 0;
				margin-left: 0;
				border-radius: 2px;
				background-color: #272727;
				height: 12px;
				z-index: 10;
				overflow: hidden;
			}

			.barover {
				position: absolute;
				top: 0px;
				left: 0px;
				display: block !important;
				border-radius: 2px;
				background-color: #691313;
				height: 12px;
				color: #fff;
				font-size: 9px;
				z-index: 11;
				padding-top: 6px;
				overflow: hidden;
			}

			.label, i {
				position: absolute;
				top: 0px;
				font-size: 10px;
				z-index: 12;
				mix-blend-mode: difference;
				filter: invert(1);
			}

			i {
				color: rgb(0, 0, 0);
				left: 50%;
			}

			.label {
				right: 20px;
			}
		}
	}

	span.actor-title-header {
		display: flex;
		justify-content: center;
		align-items: center;
		background: rgba(0, 0, 0, 0.05);
		border: 2px groove #eeede0;
		padding: 4px;
	}
	}

	.items-list {
	list-style: none;
	margin: 0;
	padding: 0;
	overflow-y: auto;
	scrollbar-width: thin;
	color: colors.$c-tan;

	// Child lists
	.item-list {
		list-style: none;
		margin: 0;
		padding: 0;
	}

	// Item Name
	.item-name {
		flex: 2;
		margin: 0;
		overflow: hidden;
		text-align: left;
		align-items: center;
		display: flex;

		h3, h4 {
			color: #222;
			font-size: 13px;
			margin: 0;
			white-space: nowrap;
			overflow: hidden;
			text-shadow: none;
			font-family: 'Signika';
		}
	}

	// Control Buttons
	.item-controls {
		display: flex;
		flex: 0 0 100px;
		justify-content: flex-end;
		a {
			font-size: 12px;
			text-align: center;
			margin: 0 6px;
		}
	}

	// Individual Item
	.item {
		align-items: center;
		padding: 0 2px; // to align with the header border
		border-bottom: 1px solid colors.$c-faint;
		&:last-child {
			border-bottom: none;
		}
		.item-name {
			color: colors.$c-dark;
			.item-image {
				display: flex;
				align-items: center;
				flex: 0 0 30px;
				height: 30px;
				background-size: 30px;
				border: none;
				margin-right: 1px;
			}
		}
	}

		.item-prop {
			text-align: center;
			border-left: 1px solid #c9c7b8;
			border-right: 1px solid #c9c7b8;
			font-size: 12px;
		}

		// Section Header
		.items-header {
			height: 28px;
			margin: 2px 0;
			padding: 0;
			align-items: center;
			background: rgba(0, 0, 0, 0.05);
			border: variables.$border-groove;
			font-weight: bold;
			> * {
				font-size: 12px;
				text-align: center;
			}
			.item-name {
				padding-left: 5px;
				text-align: left;
				// font-size: 16px;
			}
		}
	}
}

// input[type="text"], input[type="number"],
// input[type="password"], input[type="date"],
// input[type="time"],  input[type="search"],
// input[type="file"], select {
// 	color: #FFF;
// }

.sheet-body .tab {
  overflow-y: hidden;
  align-content: flex-start;
  padding-right: 2px;
}

.sheet-body,
.sheet-body .tab,
.sheet-body .tab .editor {
	height: 100%;
	min-height: 150px;
}

.sheet-body {
	overflow: hidden;
}

.window-content {
	overflow: hidden;
}

.item-form {
	font-family: typography.$font-primary;
}

.sheet-tabs {
	flex: 0;
}

// .agent .sheet-body {
// 	max-height: 398px !important;
// }

.tab.skills,
.tab.inventory,
.tab.abilities,
.tab.rituals,
.tab.biography,
.tab.effects {
	overflow-y: auto;
}

.tox {
	.tox-editor-container {
		background: colors.$c-white;
	}

	.tox-edit-area {
		padding: 0 8px;
	}
}

// SKILLS

.skills-content {
	font-size: 12px;
	padding: 0 2px;
	margin-top: 0;
	column-count: 2;

	select, input {
		font-size: 11px;
		border: none;
		height: 21px;
	}

	.skill {
		padding: 3.3px 6px;

		.modifier {
			max-width: 30px;
		}

		.rollFreeSkill {
			position: absolute;
			left: 48%;
			right: 0;
			width: 24px;
		}

		i {
			padding: 0 5px;
		}
	}
}

// OTHERS

.resource {
	.categoryCheck {
		display: flex;
	}
}

.resources {
	gap: 10px;
	margin: 5px 0;
}

.invalid {
	position: relative;
}

.item-alert {
	position: relative;
	border-radius: 5px;
	padding: 8px;
	margin: 10px 5px;
	background-color: aliceblue;
}

.item-editable-resource {
	display: inline-flex;
	align-items: center;
	justify-content: center;

	i { padding: 4px; }
	input {
		background: none;
		border: none;
	}
}


// BIOGRAPHY

.biography {
	aside {
		padding: 2px;
	}

	div:first-of-type {
		padding: 2px;
	}

	.class,
	.trail {
		font-size: 12px;
	}

	fieldset {
		border: variables.$border-transparent;
		border-radius: 10px;
	}

	.bio-desc .editor {
		min-height: 230px;
	}

	.bio-goals .editor {
		min-height: 100px;
	}
}

.inventory {
	padding-bottom: 24px;
	overflow: hidden !important;
}

.ritual-dt {
	display: flex;
	justify-content: center;
	margin: 0 8px 8px 8px;
	padding: 0 8px;
	border: 1px solid #b8b8b8;
	box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 2px 0px;
	border-radius: 5px;
	text-align: center;

	p {
		font-family: typography.$op-optima;
		font-weight: bold;
	}
}
// TODO: Separar SCSS entre geral, agente, ameaÃ§a.
.threat {
	#senses, #defenses, #attributes, #general,
	#disturbingPresence, #actions, #abilities {
		padding: 5px;
		border: 1px solid #27272740;
		margin-top: 5px;
		border-radius: 5px;

		.display-flex {
			align-items: center;
		}
	}

	.miniInput {
		width: 32px;
	}

	#attributes {
		justify-content: space-between;

		.pre, .vit, .str, .int, .dex {
			text-align: center;
			input {
				height: 32px;
			}
		}
	}

	label + input {
		margin-left: 5px;
	}

	#announcement {
		a {
			color: #272727;
		}

		.link-alert {
			padding: 0 10px;
		}
	}

	#descriptions div {
		margin: 8px 0;

		textarea {
			height: 200px;
		}
	}

	#actions, #abilities {
		textarea {
			height: 300px;
		}
	}
}

.op-agent2-sheet {
	position: relative;
	color: #1a1a1a;
	background: #f4e8d8;
	font-family: 'Warnock Pro', 'Roboto', sans-serif;
	padding: 12px;
	min-height: 100%;

	input,
	select,
	button {
		font-family: inherit;
	}

	&__noise {
		position: absolute;
		inset: 0;
		pointer-events: none;
		opacity: 0.05;
		background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
	}

	&__container {
		position: relative;
		z-index: 1;
		background: rgba(255, 255, 255, 0.6);
		backdrop-filter: blur(2px);
		border: 2px solid #111;
		padding: 16px;
		box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.15);
	}

	&__header {
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		align-items: center;
		gap: 16px;
		border-bottom: 3px solid #111;
		padding-bottom: 8px;
	}

	&__title {
		text-align: center;
		h1 {
			font-family: 'Creepster', cursive;
			font-size: 28px;
			margin: 0;
		}

		span {
			display: block;
			letter-spacing: 0.35em;
			font-weight: 700;
		}
	}

	&__label {
		font-size: 12px;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		font-weight: 700;
		margin-bottom: 4px;
		display: block;
	}

	&__field {
		display: flex;
		flex-direction: column;
		input,
		select {
			border: none;
			border-bottom: 2px solid #111;
			background: transparent;
			padding: 4px 6px;
		}
	}

	&__banner {
		margin: 16px 0;
		background: #111;
		color: #f4e8d8;
		text-align: center;
		padding: 4px 0;
		letter-spacing: 0.3em;
		font-weight: 700;
	}

	&__grid {
		display: grid;
		grid-template-columns: repeat(3, minmax(0, 1fr));
		gap: 16px;
	}

	&__col {
		display: flex;
		flex-direction: column;
		gap: 16px;
	}

	&__attribute-wheel {
		position: relative;
		width: 100%;
		aspect-ratio: 1 / 1;
		max-width: 320px;
		margin: 0 auto;
	}

	&__wheel-center {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background: #1a1a1a;
		color: #f4e8d8;
		padding: 8px 12px;
		border-radius: 50%;
		width: 120px;
		height: 120px;
		display: flex;
		align-items: center;
		justify-content: center;
		text-align: center;
		font-weight: 700;
		letter-spacing: 0.15em;
	}

	&__attr {
		position: absolute;
		width: 80px;
		height: 80px;
		border-radius: 50%;
		background: #f4e8d8;
		border: 2px solid #111;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 2px;
		text-align: center;
		input {
			width: 42px;
			text-align: center;
			border: none;
			background: transparent;
			font-weight: 700;
		}
	}

	&__attr-name {
		font-size: 10px;
		text-transform: uppercase;
	}

	&__attr-label {
		font-weight: 900;
	}

	&__attr--agi {
		top: 8%;
		left: 50%;
		transform: translate(-50%, -50%);
	}

	&__attr--int {
		top: 35%;
		left: 85%;
		transform: translate(-50%, -50%);
	}

	&__attr--vig {
		top: 85%;
		left: 75%;
		transform: translate(-50%, -50%);
	}

	&__attr--pre {
		top: 85%;
		left: 25%;
		transform: translate(-50%, -50%);
	}

	&__attr--for {
		top: 35%;
		left: 15%;
		transform: translate(-50%, -50%);
	}

	&__info-grid {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 12px;
	}

	&__stats {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 12px;
	}

	&__stat-block {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	&__stat-header {
		display: flex;
		justify-content: space-between;
		background: #111;
		color: #f4e8d8;
		padding: 4px 6px;
		font-weight: 700;
		font-size: 12px;
		text-transform: uppercase;
	}

	&__stat-values {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 6px;
		div {
			border: 2px solid #111;
			background: rgba(255, 255, 255, 0.6);
			padding: 4px;
			text-align: center;
		}
		input {
			width: 100%;
			border: none;
			background: transparent;
			font-size: 18px;
			text-align: center;
		}
		span {
			display: block;
			font-size: 10px;
			text-transform: uppercase;
			border-top: 1px solid #aaa;
			margin-top: 4px;
			padding-top: 2px;
		}
	}

	&__defense {
		grid-column: span 2;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 4px;
	}

	&__defense-shield {
		width: 90px;
		height: 110px;
		border: 2px solid #111;
		border-radius: 4px 4px 20px 20px;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		background: rgba(255, 255, 255, 0.7);
		span {
			font-size: 12px;
			text-transform: uppercase;
		}
		strong {
			font-size: 28px;
		}
	}

	&__attacks {
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	&__attacks-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		background: #111;
		color: #f4e8d8;
		padding: 4px 8px;
		h3 {
			margin: 0;
			font-size: 16px;
			letter-spacing: 0.2em;
		}
	}

	&__add-button {
		border: 1px solid #f4e8d8;
		color: inherit;
		background: transparent;
		font-size: 10px;
		text-transform: uppercase;
		padding: 2px 6px;
	}

	&__attacks-table {
		border: 2px solid #111;
		background: rgba(255, 255, 255, 0.3);
	}

	&__attacks-list {
		list-style: none;
		margin: 0;
		padding: 0;
	}

	&__attacks-row {
		display: grid;
		grid-template-columns: 2fr 1fr 1fr 2fr;
		border-bottom: 1px solid #aaa;
		padding: 4px 6px;
		font-size: 12px;

		&--header {
			background: rgba(0, 0, 0, 0.05);
			font-weight: 700;
			text-transform: uppercase;
		}
	}

	&__attacks-name {
		button {
			background: none;
			border: none;
			padding: 0;
			text-align: left;
			font-weight: 700;
		}
	}

	&__attacks-empty {
		padding: 8px;
		text-align: center;
		font-style: italic;
		color: #666;
	}

	&__skills-header {
		background: #111;
		color: #f4e8d8;
		text-align: center;
		padding: 4px 0;
		font-weight: 700;
		letter-spacing: 0.2em;
	}

	&__skills {
		max-height: 760px;
		overflow-y: auto;
		padding-right: 4px;
	}

	&__skills-row {
		display: grid;
		grid-template-columns: 1.8fr 0.6fr 0.6fr 1fr 0.6fr;
		align-items: center;
		padding: 4px 2px;
		font-size: 12px;
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);

		&--header {
			font-weight: 700;
			text-transform: uppercase;
			border-bottom: 2px solid #111;
		}
	}

	&__skill-name {
		display: flex;
		align-items: center;
		gap: 4px;
		text-transform: uppercase;
		font-weight: 600;
	}

	&__skill-mark {
		font-size: 10px;
		color: #666;
	}

	&__skill-training {
		display: flex;
		gap: 4px;
		justify-content: center;
		button {
			width: 14px;
			height: 14px;
			border-radius: 50%;
			border: 1px solid #111;
			background: transparent;
			&.is-active {
				background: #111;
			}
		}
	}

	&__skill-other input {
		width: 100%;
		border: none;
		border-bottom: 1px solid #aaa;
		background: transparent;
		text-align: center;
	}

	&__skills-footer {
		font-size: 10px;
		text-align: right;
		color: #666;
		margin-top: 6px;
	}

	&__footer {
		margin-top: 16px;
		border-top: 1px solid #bbb;
		padding-top: 6px;
		text-align: center;
		font-size: 10px;
		color: #666;
	}
}

// .item-form {
//   font-family: typography.$font-primary;
// }
.item {
	.sheet-header {
  flex: 0 auto;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
  margin-bottom: 10px;
	height: 180px;

		.profile-img {
			flex: 0 0 100px;
			height: 100px;
			margin-right: 10px;
		}

		.header-fields {
			display: flex;
			flex-direction: column;
			flex: 1;
			align-items: center;
			justify-content: center;

			.document-name {
				width: 100%;
			}
		}
	}

	.window-content {
		height: 100%;
	}

	.content {
		height: 100%;
  	overflow-y: auto;
	}

	.tab {
  	overflow-y: hidden;
  	height: 100%;
  	align-content: flex-start;
  	padding-right: 2px;
	}
}


/* ITEMS IN ACTOR SHEET (AGENT) */
.item-space {
	flex: 1 20px;
	padding: 0 8px;
}

.item-sheet {
	display: flex;
	flex: 1;
	background-color: aqua;
}

.item-image {
	perspective: 50px;

	img {
		border: 1px solid #00000070;
	}
}

.slide {
	overflow: hidden;

	& > img,
	a {
		transition: 0.3s all ease-in-out;
		position: absolute;
	}
	& > a {
		margin-left: 4px;
		font-size: 20px;
		transform: translate(50px, 0);
	}
	&:hover {
		& > img {
			transform: translate(-(200px), 0);
		}
		& > a {
			transform: translate(0, 0);
		}
	}
}
